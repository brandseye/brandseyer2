<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>brandseyer2 • brandseyer2</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="brandseyer2">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">brandseyer2</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="Unreleased version">0.0.1.9031</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/brandseyer2.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/cookbook.html">The brandseyer2 Cookbook</a>
    </li>
    <li>
      <a href="../articles/filtering.html">Filtering</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/brandseye/brandseyer2">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>brandseyer2</h1>
                        <h4 class="author">Constance Neeser</h4>
            
            <h4 class="date">2019-09-02</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/brandseye/brandseyer2/blob/master/vignettes/brandseyer2.Rmd"><code>vignettes/brandseyer2.Rmd</code></a></small>
      <div class="hidden name"><code>brandseyer2.Rmd</code></div>

    </div>

    
    
<div id="who-is-brandseye-and-what-is-brandseyer2" class="section level1">
<h1 class="hasAnchor">
<a href="#who-is-brandseye-and-what-is-brandseyer2" class="anchor"></a>Who is BrandsEye and what is brandseyer2?</h1>
<p>BrandsEye: opinion mining. Sentiment and topics.</p>
<p>What is sentiment? It’s always towards somethings. And people may be talking about particular topics.</p>
<div id="data-sources" class="section level2">
<h2 class="hasAnchor">
<a href="#data-sources" class="anchor"></a>Data sources</h2>
</div>
<div id="the-brandseye-crowd" class="section level2">
<h2 class="hasAnchor">
<a href="#the-brandseye-crowd" class="anchor"></a>The BrandsEye Crowd</h2>
</div>
</div>
<div id="authenticating-yourself" class="section level1">
<h1 class="hasAnchor">
<a href="#authenticating-yourself" class="anchor"></a>Authenticating yourself</h1>
<p>brandseyer2 provides API access to the BrandsEye API. In order to identify who you are, we provide our users with API keys on request. API keys are strings of randomly generated characters and numbers — they are difficult to guess, and very secure.</p>
<p>You can contact your account manager to get your API key. Once you have your API key, the first step to using brandseyer2 is to authenticate yourself, which you can do as follows:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(brandseyer2)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="kw"><a href="../reference/authenticate.html">authenticate</a></span>(<span class="dt">key =</span> <span class="st">"&lt;my api key&gt;"</span>)</a></code></pre></div>
<p>This will let brandseyer2 know who you are. If you don’t want to type this in every time that you use brandseyer2, you can tell brandseyer2 to save your api key.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw"><a href="../reference/authenticate.html">authenticate</a></span>(<span class="dt">key =</span> <span class="st">"&lt;my api key&gt;"</span>, <span class="dt">save =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<p>Now, every time the library is loaded, brandseyer2 will immediately start using the saved API key.</p>
<p>Along with the <code>authenticate</code> function, you can also find out whose API key brandseyer2 is using:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="kw"><a href="../reference/whoami.html">whoami</a></span>()</a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="co">#&gt; BrandsEye Credentials</span></a>
<a class="sourceLine" id="cb3-3" data-line-number="3"><span class="co">#&gt;   name:  Constance Neeser</span></a>
<a class="sourceLine" id="cb3-4" data-line-number="4"><span class="co">#&gt;   email: connie@brandseye.com </span></a></code></pre></div>
<p>Now that you have authenticated yourself, you can begin to access your account information and mentions.</p>
<div id="protecting-your-api-key" class="section level2">
<h2 class="hasAnchor">
<a href="#protecting-your-api-key" class="anchor"></a>Protecting your API key</h2>
<ul>
<li>Don’t share with others</li>
<li>Don’t submit them to source code repositories.</li>
</ul>
</div>
<div id="what-to-do-if-things-go-bad" class="section level2">
<h2 class="hasAnchor">
<a href="#what-to-do-if-things-go-bad" class="anchor"></a>What to do if things go bad?</h2>
<p>Contact your account manager. They’ll provide you with a new API key. Your previous API key will stop working.</p>
</div>
</div>
<div id="overview" class="section level1">
<h1 class="hasAnchor">
<a href="#overview" class="anchor"></a>Overview</h1>
<p>What is an account? What are mentions? What is the crowd, and sentiment and topics.</p>
<p>Some simple examples of pulling mentions for accounts, grouping, updating.</p>
<p>An account collects and structures the data that BrandsEye collects and processes for you. The smallest bit of data that we collect is a <em>mention</em>. A <em>mention</em> is a post on some social media network — for example, a tweet, or a facebook post, is a <em>mention</em>.</p>
<p>We collect mentions in <em>brands</em>. Brands define the point of interest of the mentions. Example brands may be the name of your company, a competitor, a well known individual, and so on. The sentiment of a mention is always measured towards the brand that the mention is collected in, and the brands also define what the <em>topics</em> that a mention may be about are.</p>
<p>Brands also organise the search <em>phrases</em> that we use to find mentions online for you.</p>
<p>Brands themselves are collected in <em>accounts</em>. Accounts also store extra information, such as what people get to access the data, how much Crowd verification the data receives, and so on.</p>
</div>
<div id="working-with-accounts" class="section level1">
<h1 class="hasAnchor">
<a href="#working-with-accounts" class="anchor"></a>Working with accounts</h1>
<p>As someone who works with BrandsEye tools, you have a collection of accounts that you have access to. You can find this collection of accounts using <code><a href="../reference/account_list.html">account_list()</a></code>, as follows:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="kw"><a href="../reference/account_list.html">account_list</a></span>()</a></code></pre></div>
<p>This returns a tibble of accounts that are available to you. Importantly, it lets you find the account code (listed in the <code>account</code>, such as <code>TEST01AA</code> and <code>TEST02AA</code>) column that brandseyer2 uses to reference individual accounts.</p>
<div id="referencing-an-account" class="section level2">
<h2 class="hasAnchor">
<a href="#referencing-an-account" class="anchor"></a>Referencing an account</h2>
<p>Nearly all the functions in brandseyer2 needs an account reference. You can refer to any account using it’s account code and the <code><a href="../reference/account.html">account()</a></code> function. For example:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="co"># Get a reference to the account TEST01AA</span></a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="kw"><a href="../reference/account.html">account</a></span>(<span class="st">"TEST01AA"</span>)</a>
<a class="sourceLine" id="cb5-3" data-line-number="3"><span class="co">#&gt; BrandsEye Account </span></a>
<a class="sourceLine" id="cb5-4" data-line-number="4"><span class="co">#&gt;     Name:   Test 1 </span></a>
<a class="sourceLine" id="cb5-5" data-line-number="5"><span class="co">#&gt;     Code:   TEST01AA </span></a>
<a class="sourceLine" id="cb5-6" data-line-number="6"><span class="co">#&gt;   Client:   MKT001</span></a></code></pre></div>
<p>Many operations that you may want to perform will begin with finding an account reference, and then passing this on to other brandseyer2 functions using the pipe operator, <code>%&gt;%</code>.</p>
<p>Here are some examples to find the name, code, and account manager of your account:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="co"># Your account's name</span></a>
<a class="sourceLine" id="cb6-2" data-line-number="2"><span class="kw"><a href="../reference/account.html">account</a></span>(<span class="st">"TEST01AA"</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb6-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="../reference/account_name.html">account_name</a></span>()</a>
<a class="sourceLine" id="cb6-4" data-line-number="4"><span class="co">#&gt; [1] "Test 1"</span></a></code></pre></div>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="co"># Your account code</span></a>
<a class="sourceLine" id="cb7-2" data-line-number="2"><span class="kw"><a href="../reference/account.html">account</a></span>(<span class="st">"TEST01AA"</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb7-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="../reference/account_code.html">account_code</a></span>()</a>
<a class="sourceLine" id="cb7-4" data-line-number="4"><span class="co">#&gt; [1] "TEST01AA"</span></a></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="co"># Your account manager.</span></a>
<a class="sourceLine" id="cb8-2" data-line-number="2"><span class="kw"><a href="../reference/account.html">account</a></span>(<span class="st">"TEST01AA"</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb8-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="../reference/account_manager.html">account_manager</a></span>()</a>
<a class="sourceLine" id="cb8-4" data-line-number="4"><span class="co">#&gt; BrandsEye Client Service</span></a>
<a class="sourceLine" id="cb8-5" data-line-number="5"><span class="co">#&gt;   name:  Your Manager</span></a>
<a class="sourceLine" id="cb8-6" data-line-number="6"><span class="co">#&gt;   email: noreply@brandseye.com</span></a></code></pre></div>
</div>
<div id="brands" class="section level2">
<h2 class="hasAnchor">
<a href="#brands" class="anchor"></a>Brands</h2>
<p>Accounts are made up of <em>brands</em>. It is brands themselves that store individual <em>mentions</em> (such as tweets, facebook posts, and so on).</p>
<p>A brand is usually something that you would like to track on social media, and measure sentiment towards. All sentiment on a mention is always towards the brand that the mention belongs to.</p>
<p>You can find out what brands are in your account using the <code><a href="../reference/brands.html">brands()</a></code> function. Let’s have a look at what brands are in <em>TEST01AA</em>:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="kw"><a href="../reference/account.html">account</a></span>(<span class="st">"TEST01AA"</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb9-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/brands.html">brands</a></span>()</a>
<a class="sourceLine" id="cb9-3" data-line-number="3"><span class="co">#&gt; # A tibble: 5 x 5</span></a>
<a class="sourceLine" id="cb9-4" data-line-number="4"><span class="co">#&gt;      id name                    parent deleted    archived</span></a>
<a class="sourceLine" id="cb9-5" data-line-number="5"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt;                    &lt;int&gt; &lt;lgl&gt;         &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb9-6" data-line-number="6"><span class="co">#&gt; 1     1 Your Brand Here             NA FALSE           NA </span></a>
<a class="sourceLine" id="cb9-7" data-line-number="7"><span class="co">#&gt; 2     2 Sibling Brand               NA FALSE           NA </span></a>
<a class="sourceLine" id="cb9-8" data-line-number="8"><span class="co">#&gt; 3     5 So deleted                  NA TRUE            NA </span></a>
<a class="sourceLine" id="cb9-9" data-line-number="9"><span class="co">#&gt; 4     6 Brand of Christmas Past     NA FALSE   1516710018.</span></a>
<a class="sourceLine" id="cb9-10" data-line-number="10"><span class="co">#&gt; 5     3 Niece Brand                  2 FALSE           NA</span></a></code></pre></div>
<p>These tibbles can become a bit tight to display all of the data that you may want to see. If you are using RStudio, you can always pipe the results in to View(). Otherwise, you can subselect for the data you want using standard dplyr<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a> functions.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="co"># Find brand IDs and names</span></a>
<a class="sourceLine" id="cb10-2" data-line-number="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(dplyr)</a>
<a class="sourceLine" id="cb10-3" data-line-number="3"></a>
<a class="sourceLine" id="cb10-4" data-line-number="4"><span class="kw"><a href="../reference/account.html">account</a></span>(<span class="st">"TEST01AA"</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb10-5" data-line-number="5"><span class="st">  </span><span class="kw"><a href="../reference/brands.html">brands</a></span>() <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb10-6" data-line-number="6"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span>(id, name, parent)</a>
<a class="sourceLine" id="cb10-7" data-line-number="7"><span class="co">#&gt; # A tibble: 5 x 3</span></a>
<a class="sourceLine" id="cb10-8" data-line-number="8"><span class="co">#&gt;      id name                    parent</span></a>
<a class="sourceLine" id="cb10-9" data-line-number="9"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt;                    &lt;int&gt;</span></a>
<a class="sourceLine" id="cb10-10" data-line-number="10"><span class="co">#&gt; 1     1 Your Brand Here             NA</span></a>
<a class="sourceLine" id="cb10-11" data-line-number="11"><span class="co">#&gt; 2     2 Sibling Brand               NA</span></a>
<a class="sourceLine" id="cb10-12" data-line-number="12"><span class="co">#&gt; 3     5 So deleted                  NA</span></a>
<a class="sourceLine" id="cb10-13" data-line-number="13"><span class="co">#&gt; 4     6 Brand of Christmas Past     NA</span></a>
<a class="sourceLine" id="cb10-14" data-line-number="14"><span class="co">#&gt; 5     3 Niece Brand                  2</span></a></code></pre></div>
<p>There, that’s better. Now you can see that your <em>TEST01AA</em> account is made out of three brands. We’ve also selected another column called <code>parent</code>. We’ve done this to show the hierarchical nature of brands: some brands are children of other brands. Setting up an account in this way can help you to organise the mentions that are collected in a brand around more specific themes.</p>
<p>You can also discover this information for all the accounts that you have access to.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="co"># Example here</span></a></code></pre></div>
<p>Notice that one of our accounts have old brands that are no longer being used, and have been deleted. Also, we often want to find the top level brands that make up the main collections of mentions in an account. These “top level” brands are called <em>root brands</em>. We have a convenient function that finds the root brands currently in use in your account:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1"><span class="kw"><a href="../reference/account.html">account</a></span>(<span class="st">"TEST01AA"</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb12-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/root_brands.html">root_brands</a></span>()</a>
<a class="sourceLine" id="cb12-3" data-line-number="3"><span class="co">#&gt; # A tibble: 2 x 4</span></a>
<a class="sourceLine" id="cb12-4" data-line-number="4"><span class="co">#&gt;      id name            deleted archived</span></a>
<a class="sourceLine" id="cb12-5" data-line-number="5"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt;           &lt;lgl&gt;      &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb12-6" data-line-number="6"><span class="co">#&gt; 1     1 Your Brand Here FALSE         NA</span></a>
<a class="sourceLine" id="cb12-7" data-line-number="7"><span class="co">#&gt; 2     2 Sibling Brand   FALSE         NA</span></a></code></pre></div>
</div>
<div id="tags" class="section level2">
<h2 class="hasAnchor">
<a href="#tags" class="anchor"></a>Tags</h2>
<p>We introduce tags early, since topics are just tags.</p>
</div>
<div id="topics" class="section level2">
<h2 class="hasAnchor">
<a href="#topics" class="anchor"></a>Topics</h2>
<p>What are they? Why are they important? How does BE create these?</p>
<p>How do you know what topics are available on your brands? Look at topic trees. Then see what topic trees are children of that.</p>
</div>
</div>
<div id="working-with-mentions" class="section level1">
<h1 class="hasAnchor">
<a href="#working-with-mentions" class="anchor"></a>Working with mentions</h1>
<p>Mentions can be read using the <code><a href="../reference/mentions.html">mentions()</a></code> function:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1"><span class="kw"><a href="../reference/account.html">account</a></span>(<span class="st">"TEST01AA"</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb13-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/mentions.html">mentions</a></span>(<span class="dt">filter =</span> <span class="st">"published inthelast week"</span>)</a>
<a class="sourceLine" id="cb13-3" data-line-number="3"><span class="co">#&gt; # A tibble: 1 x 7</span></a>
<a class="sourceLine" id="cb13-4" data-line-number="4"><span class="co">#&gt;   id    published           brands sentiment mediaLinks socialNetwork tags </span></a>
<a class="sourceLine" id="cb13-5" data-line-number="5"><span class="co">#&gt;   &lt;chr&gt; &lt;dttm&gt;              &lt;list&gt;     &lt;int&gt; &lt;list&gt;     &lt;chr&gt;         &lt;lis&gt;</span></a>
<a class="sourceLine" id="cb13-6" data-line-number="6"><span class="co">#&gt; 1 2-1   2018-03-03 21:37:35 &lt;int …         0 &lt;tibble [… TWITTER       &lt;int…</span></a></code></pre></div>
</div>
<div id="counting-mentions" class="section level1">
<h1 class="hasAnchor">
<a href="#counting-mentions" class="anchor"></a>Counting mentions</h1>
<p>Mentions can be counted. The simplest way of doing this is with the <code><a href="../reference/count_mentions.html">count_mentions()</a></code> function, and using a query language designed to do this.</p>
<p>Here is a simple query to count all mentions published the last week:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1"><span class="kw"><a href="../reference/account.html">account</a></span>(<span class="st">"QUIR01BA"</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb14-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/filter_mentions.html">filter_mentions</a></span>(<span class="st">"published inthelast week"</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb14-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="../reference/count_mentions.html">count_mentions</a></span>()</a>
<a class="sourceLine" id="cb14-4" data-line-number="4"><span class="co">#&gt; # A tibble: 1 x 1</span></a>
<a class="sourceLine" id="cb14-5" data-line-number="5"><span class="co">#&gt;   mentionCount</span></a>
<a class="sourceLine" id="cb14-6" data-line-number="6"><span class="co">#&gt;          &lt;int&gt;</span></a>
<a class="sourceLine" id="cb14-7" data-line-number="7"><span class="co">#&gt; 1         8907</span></a></code></pre></div>
<p>More interestingly, we can count just the relevant mentions from the last week:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1"><span class="kw"><a href="../reference/account.html">account</a></span>(<span class="st">"QUIR01BA"</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb15-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/filter_mentions.html">filter_mentions</a></span>(<span class="st">"published inthelast week and relevancy isnt irrelevant"</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb15-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="../reference/count_mentions.html">count_mentions</a></span>()</a>
<a class="sourceLine" id="cb15-4" data-line-number="4"><span class="co">#&gt; # A tibble: 1 x 1</span></a>
<a class="sourceLine" id="cb15-5" data-line-number="5"><span class="co">#&gt;   mentionCount</span></a>
<a class="sourceLine" id="cb15-6" data-line-number="6"><span class="co">#&gt;          &lt;int&gt;</span></a>
<a class="sourceLine" id="cb15-7" data-line-number="7"><span class="co">#&gt; 1         7918</span></a></code></pre></div>
<p>If you would like to know more about filtering in particular, see our <a href="filtering.html">Filtering</a> vignette.</p>
<p>Now, counting mentions becomes interesting when we begin to do things such as grouping mentions. For example, we can group mentions by the published date.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1"><span class="kw"><a href="../reference/account.html">account</a></span>(<span class="st">"QUIR01BA"</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb16-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/filter_mentions.html">filter_mentions</a></span>(<span class="st">"published inthelast week and relevancy isnt irrelevant"</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb16-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="../reference/group_mentions_by.html">group_mentions_by</a></span>(published) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb16-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="../reference/count_mentions.html">count_mentions</a></span>()</a>
<a class="sourceLine" id="cb16-5" data-line-number="5"><span class="co">#&gt; # A tibble: 8 x 2</span></a>
<a class="sourceLine" id="cb16-6" data-line-number="6"><span class="co">#&gt;   published           mentionCount</span></a>
<a class="sourceLine" id="cb16-7" data-line-number="7"><span class="co">#&gt;   &lt;dttm&gt;                     &lt;int&gt;</span></a>
<a class="sourceLine" id="cb16-8" data-line-number="8"><span class="co">#&gt; 1 2018-07-26 00:00:00         1410</span></a>
<a class="sourceLine" id="cb16-9" data-line-number="9"><span class="co">#&gt; 2 2018-07-27 00:00:00         1067</span></a>
<a class="sourceLine" id="cb16-10" data-line-number="10"><span class="co">#&gt; 3 2018-07-28 00:00:00          528</span></a>
<a class="sourceLine" id="cb16-11" data-line-number="11"><span class="co">#&gt; 4 2018-07-29 00:00:00          655</span></a>
<a class="sourceLine" id="cb16-12" data-line-number="12"><span class="co">#&gt; 5 2018-07-30 00:00:00         1389</span></a>
<a class="sourceLine" id="cb16-13" data-line-number="13"><span class="co">#&gt; 6 2018-07-31 00:00:00         1214</span></a>
<a class="sourceLine" id="cb16-14" data-line-number="14"><span class="co">#&gt; 7 2018-08-01 00:00:00         1124</span></a>
<a class="sourceLine" id="cb16-15" data-line-number="15"><span class="co">#&gt; 8 2018-08-02 00:00:00          532</span></a></code></pre></div>
<p>This is something that you could potentially chart, using a library such as <a href="http://ggplot2.org/">ggplot2</a>.</p>
<div class="figure">
<img src="brandseyer2_files/figure-html/unnamed-chunk-17-1.png" alt="A plot of data pulled from the api" width="480"><p class="caption">
A plot of data pulled from the api
</p>
</div>
<p>One thing to take note of is that at no point have we specified what brands we want to use in the filter. This happens automatically: the query language selects all the root brands. You can easily examine this by leaving out the final step in the pipe chain above, like so:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1"><span class="kw"><a href="../reference/account.html">account</a></span>(<span class="st">"QUIR01BA"</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb17-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/filter_mentions.html">filter_mentions</a></span>(<span class="st">"published inthelast week and relevancy isnt irrelevant"</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb17-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="../reference/group_mentions_by.html">group_mentions_by</a></span>(published)</a>
<a class="sourceLine" id="cb17-4" data-line-number="4"><span class="co">#&gt; BrandsEye Query</span></a>
<a class="sourceLine" id="cb17-5" data-line-number="5"><span class="co">#&gt;   accounts:  QUIR01BA</span></a>
<a class="sourceLine" id="cb17-6" data-line-number="6"><span class="co">#&gt;   brands:    35 brands selected</span></a>
<a class="sourceLine" id="cb17-7" data-line-number="7"><span class="co">#&gt;   timezones: Africa/Johannesburg</span></a>
<a class="sourceLine" id="cb17-8" data-line-number="8"><span class="co">#&gt;   filter:    published inthelast week and relevancy isnt irrelevant</span></a>
<a class="sourceLine" id="cb17-9" data-line-number="9"><span class="co">#&gt;   grouping:  published</span></a></code></pre></div>
<p>If you would like to see the filter being produced, you can do so using the <code><a href="../reference/to_count_filter.html">to_count_filter()</a></code> method. Let’s do this using an account with fewer root brands:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" data-line-number="1"><span class="co"># Let's see what the query looks like</span></a>
<a class="sourceLine" id="cb18-2" data-line-number="2"><span class="kw"><a href="../reference/account.html">account</a></span>(<span class="st">"TEST01AA"</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb18-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="../reference/filter_mentions.html">filter_mentions</a></span>(<span class="st">"published inthelast week and relevancy isnt irrelevant"</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb18-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="../reference/group_mentions_by.html">group_mentions_by</a></span>(published)</a>
<a class="sourceLine" id="cb18-5" data-line-number="5"><span class="co">#&gt; BrandsEye Query</span></a>
<a class="sourceLine" id="cb18-6" data-line-number="6"><span class="co">#&gt;   accounts:  TEST01AA</span></a>
<a class="sourceLine" id="cb18-7" data-line-number="7"><span class="co">#&gt;   brands:    TEST01AA:1[Your Brand Here], TEST01AA:2[Sibling Brand]</span></a>
<a class="sourceLine" id="cb18-8" data-line-number="8"><span class="co">#&gt;   timezones: Africa/Johannesburg</span></a>
<a class="sourceLine" id="cb18-9" data-line-number="9"><span class="co">#&gt;   filter:    published inthelast week and relevancy isnt irrelevant</span></a>
<a class="sourceLine" id="cb18-10" data-line-number="10"><span class="co">#&gt;   grouping:  published</span></a>
<a class="sourceLine" id="cb18-11" data-line-number="11"></a>
<a class="sourceLine" id="cb18-12" data-line-number="12"><span class="co"># And this is the filter</span></a>
<a class="sourceLine" id="cb18-13" data-line-number="13"><span class="kw"><a href="../reference/account.html">account</a></span>(<span class="st">"TEST01AA"</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb18-14" data-line-number="14"><span class="st">  </span><span class="kw"><a href="../reference/filter_mentions.html">filter_mentions</a></span>(<span class="st">"published inthelast week and relevancy isnt irrelevant"</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb18-15" data-line-number="15"><span class="st">  </span><span class="kw"><a href="../reference/group_mentions_by.html">group_mentions_by</a></span>(published) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb18-16" data-line-number="16"><span class="st">  </span><span class="kw"><a href="../reference/to_count_filter.html">to_count_filter</a></span>(<span class="st">"TEST01AA"</span>)</a>
<a class="sourceLine" id="cb18-17" data-line-number="17"><span class="co">#&gt; (published inthelast week and relevancy isnt irrelevant) and (brand isorchildof 1 or brand isorchildof 2)</span></a></code></pre></div>
<p>Notice that the <em>group by</em> doesn’t occur in the filter: this is additional data sent to the API when we request the data. This full filter is, however, sent to the API. It’s also an appropriate filter for use in Analyse or anywhere else that a filter is accepted.</p>
<p>A useful thing that the filter allows us to do is to count data across multiple accounts at a time. For example, you across two specific brands:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" data-line-number="1"><span class="kw"><a href="../reference/account.html">account</a></span>(<span class="st">"QUIR01BA"</span>, <span class="st">"BEUB03AA"</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb19-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/filter_mentions.html">filter_mentions</a></span>(<span class="st">"published inthelast week and relevancy isnt irrelevant"</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb19-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="../reference/count_mentions.html">count_mentions</a></span>()</a>
<a class="sourceLine" id="cb19-4" data-line-number="4"><span class="co">#&gt; # A tibble: 2 x 2</span></a>
<a class="sourceLine" id="cb19-5" data-line-number="5"><span class="co">#&gt;   account  mentionCount</span></a>
<a class="sourceLine" id="cb19-6" data-line-number="6"><span class="co">#&gt;   &lt;chr&gt;           &lt;int&gt;</span></a>
<a class="sourceLine" id="cb19-7" data-line-number="7"><span class="co">#&gt; 1 QUIR01BA         7951</span></a>
<a class="sourceLine" id="cb19-8" data-line-number="8"><span class="co">#&gt; 2 BEUB03AA         8466</span></a></code></pre></div>
<p>Again, you can group by any grouping field that you would want.</p>
<p>You can also count across all accounts that are available to you:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" data-line-number="1"><span class="kw"><a href="../reference/account_list.html">account_list</a></span>() <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb20-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/account.html">account</a></span>() <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb20-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="../reference/filter_mentions.html">filter_mentions</a></span>(<span class="st">"published inthelast week and relevancy isnt irrelevant"</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb20-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="../reference/count_mentions.html">count_mentions</a></span>()</a>
<a class="sourceLine" id="cb20-5" data-line-number="5"><span class="co">#&gt; # A tibble: 4 x 2</span></a>
<a class="sourceLine" id="cb20-6" data-line-number="6"><span class="co">#&gt;   account  mentionCount</span></a>
<a class="sourceLine" id="cb20-7" data-line-number="7"><span class="co">#&gt;   &lt;chr&gt;           &lt;int&gt;</span></a>
<a class="sourceLine" id="cb20-8" data-line-number="8"><span class="co">#&gt; 1 QUIR01BA         7951</span></a>
<a class="sourceLine" id="cb20-9" data-line-number="9"><span class="co">#&gt; 2 BEUB03AA         8466</span></a>
<a class="sourceLine" id="cb20-10" data-line-number="10"><span class="co">#&gt; 3 TEST01AA         1234</span></a>
<a class="sourceLine" id="cb20-11" data-line-number="11"><span class="co">#&gt; 4 TEST02AA         1234</span></a></code></pre></div>
<p>A very useful thing that the query language provides us, is the ability to compare sub-groups of mentions using sub-filters. For example, if we want to find mentions inside and outside of Africa, we could so as follows:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" data-line-number="1"><span class="kw"><a href="../reference/account.html">account</a></span>(<span class="st">"QUIR01BA"</span>, <span class="st">"BEUB03AA"</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb21-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/filter_mentions.html">filter_mentions</a></span>(<span class="st">"published inthelast week and relevancy isnt irrelevant"</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb21-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="../reference/compare_mentions.html">compare_mentions</a></span>(<span class="dt">africa =</span> <span class="st">"location is 'africa'"</span>, <span class="dt">elsewhere =</span> <span class="st">"location isnt 'africa'"</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb21-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="../reference/count_mentions.html">count_mentions</a></span>()</a>
<a class="sourceLine" id="cb21-5" data-line-number="5"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb21-6" data-line-number="6"><span class="co">#&gt;   account  comparison mentionCount</span></a>
<a class="sourceLine" id="cb21-7" data-line-number="7"><span class="co">#&gt;   &lt;chr&gt;    &lt;chr&gt;             &lt;int&gt;</span></a>
<a class="sourceLine" id="cb21-8" data-line-number="8"><span class="co">#&gt; 1 QUIR01BA africa              184</span></a>
<a class="sourceLine" id="cb21-9" data-line-number="9"><span class="co">#&gt; 2 QUIR01BA elsewhere          7139</span></a>
<a class="sourceLine" id="cb21-10" data-line-number="10"><span class="co">#&gt; 3 BEUB03AA africa             7850</span></a>
<a class="sourceLine" id="cb21-11" data-line-number="11"><span class="co">#&gt; 4 BEUB03AA elsewhere           295</span></a></code></pre></div>
<p>We have provided two seperate sub-filters, one labeled ‘africa’, one labeled ‘elsewhere’. Notice that these labels have now appeared in the result table, once for each account that we are querying.</p>
</div>
<div id="what-to-read-next" class="section level1">
<h1 class="hasAnchor">
<a href="#what-to-read-next" class="anchor"></a>What to read next</h1>
<p>If you would like a more in-depth understanding of filtering, see our <a href="filtering.html">filtering vignette</a>. Our <a href="cookbook.html">Cookbook</a> contains a lot of small scripts to perform specific tasks that you may find useful.</p>
</div>
<div class="footnotes">
<hr>
<ol>
<li id="fn1"><p><a href="https://dplyr.tidyverse.org/">dplyr</a> is a great library for working with and manipulating your data sets. brandseyer2 is built around some patterns that you will find in dplyr itself.<a href="#fnref1" class="footnote-back">↩</a></p></li>
</ol>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li>
<a href="#who-is-brandseye-and-what-is-brandseyer2">Who is BrandsEye and what is brandseyer2?</a><ul class="nav nav-pills nav-stacked">
<li><a href="#data-sources">Data sources</a></li>
      <li><a href="#the-brandseye-crowd">The BrandsEye Crowd</a></li>
      </ul>
</li>
      <li>
<a href="#authenticating-yourself">Authenticating yourself</a><ul class="nav nav-pills nav-stacked">
<li><a href="#protecting-your-api-key">Protecting your API key</a></li>
      <li><a href="#what-to-do-if-things-go-bad">What to do if things go bad?</a></li>
      </ul>
</li>
      <li><a href="#overview">Overview</a></li>
      <li>
<a href="#working-with-accounts">Working with accounts</a><ul class="nav nav-pills nav-stacked">
<li><a href="#referencing-an-account">Referencing an account</a></li>
      <li><a href="#brands">Brands</a></li>
      <li><a href="#tags">Tags</a></li>
      <li><a href="#topics">Topics</a></li>
      </ul>
</li>
      <li><a href="#working-with-mentions">Working with mentions</a></li>
      <li><a href="#counting-mentions">Counting mentions</a></li>
      <li><a href="#what-to-read-next">What to read next</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Constance Neeser, Lara Basson.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
