<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Filtering • brandseyer2</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Filtering">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">brandseyer2</a>
        <span class="label label-danger" data-toggle="tooltip" data-placement="bottom" title="Unreleased package">0.0.1.9020</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/brandseyer2.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/cookbook.html">The brandseyer2 Cookbook</a>
    </li>
    <li>
      <a href="../articles/filtering.html">Filtering</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/brandseye/brandseyer2">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Filtering</h1>
                        <h4 class="author">Constance Neeser</h4>
            
            <h4 class="date">2018-09-07</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/brandseye/brandseyer2/blob/master/vignettes/filtering.Rmd"><code>vignettes/filtering.Rmd</code></a></small>
      <div class="hidden name"><code>filtering.Rmd</code></div>

    </div>

    
    
<ul>
<li>We probably need a vignette describing what a mention looks like. Although grouse documentation?</li>
</ul>
<div id="introduction" class="section level1">
<h1 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h1>
<p>This is an introduction</p>
<p>This will provide an introduction to filtering for data in BrandsEye</p>
<p>BrandsEye’s API supports a small language to help you select exactly the mentions that you want to select. You’ll do this with the help of the <code><a href="../reference/mentions.html">mentions()</a></code> function, which always expects a filter. You can also count and aggregate mention data using <code><a href="../reference/count_mentions.html">count_mentions()</a></code>. We also have a query language, that this will introduce a bit of.</p>
<p>Combined with <a href="https://dplyr.tidyverse.org/">dplyr</a><a href="#fn1" class="footnoteRef" id="fnref1"><sup>1</sup></a> for manipulating data, <a href="https://ggplot2.tidyverse.org/">ggplot2</a><a href="#fn2" class="footnoteRef" id="fnref2"><sup>2</sup></a> for visualising data, and <a href="https://readr.tidyverse.org/">readr</a><a href="#fn3" class="footnoteRef" id="fnref3"><sup>3</sup></a> for exporting data, brandseyer2 is a powerful tool for examining social media data.</p>
<p>Filtering is selecting individual mentions to make up a data set, either to be returned directly using the <code><a href="../reference/mentions.html">mentions()</a></code> function, or for counting and aggregating using <code><a href="../reference/count_mentions.html">count_mentions()</a></code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(brandseyer2)

<span class="kw"><a href="../reference/account.html">account</a></span>(<span class="st">"TEST01AA"</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw"><a href="../reference/mentions.html">mentions</a></span>(<span class="dt">filter =</span> <span class="st">"published inthelast week"</span>)  
<span class="co">#&gt; # A tibble: 1 x 7</span>
<span class="co">#&gt;   id    published           brands sentiment mediaLinks socialNetwork tags</span>
<span class="co">#&gt;   &lt;chr&gt; &lt;dttm&gt;              &lt;list&gt;     &lt;int&gt; &lt;list&gt;     &lt;chr&gt;         &lt;li&gt;</span>
<span class="co">#&gt; 1 2-1   2018-03-03 21:37:35 &lt;int …         0 &lt;tibble [… TWITTER       &lt;in…</span></code></pre></div>
</div>
<div id="filtering" class="section level1">
<h1 class="hasAnchor">
<a href="#filtering" class="anchor"></a>Filtering</h1>
<div id="dates" class="section level2">
<h2 class="hasAnchor">
<a href="#dates" class="anchor"></a>Dates</h2>
<p>All mentions are published at a particular date and time. This is the most important thing that you can filter on: the publication date. Most questions that we want to answer usually have a constrained time period. For example,</p>
<blockquote>
<p>what was the sentiment towards our brand <em>last month</em>?</p>
</blockquote>
<p>or</p>
<blockquote>
<p>how did sentiment change towards our brand over Christmas last year compared to Christmas the year before?</p>
</blockquote>
<p>The <code>published</code> field allows us to filter on mentions by their date of publication. For example,</p>
<blockquote>
<p>published after ‘2018/01/01’</p>
</blockquote>
<p>will filter for mentions that are published <em>on or after</em> the 1st of January, 2018. Note that mentions published on the first are also included by the filter.</p>
<blockquote>
<p>published before ‘2018/02/01’</p>
</blockquote>
<p>filters for mentions published strictly before the 1st of February, 2018. It <em>does not</em> include mentions from the 1st of February.</p>
<p>These two filters can be combined using the word <code>and</code>, like so:</p>
<blockquote>
<p>published after ‘2018/01/01’ and published before ‘2018/02/01’</p>
</blockquote>
<p>Some things to notice in this filter: it’s made up of two <em>sub-filters</em>, the <em>after</em> bit, and the <em>before</em> bit. These have been combined using an <code>and</code>. Dates themselves are quoted in single-quotes, like so: ‘2018/01/01’.</p>
<p>Only mentions for which are published both after 2018/01/01 <em>and</em> before 2018/02/02, will be selected by this filter. In other words, this filter selects mentions published during the month of January.</p>
<p>We will have more to say about the connector <code>and</code> in a later section of this guide.</p>
<p>You can test this out now, using either analyse or brandseyer2.</p>
<div id="trying-this-out" class="section level3">
<h3 class="hasAnchor">
<a href="#trying-this-out" class="anchor"></a>Trying this out</h3>
<div id="in-analyse" class="section level4">
<h4 class="hasAnchor">
<a href="#in-analyse" class="anchor"></a>In analyse</h4>
<p>The brand selector.</p>
</div>
<div id="using-brandseyer2" class="section level4">
<h4 class="hasAnchor">
<a href="#using-brandseyer2" class="anchor"></a>Using brandseyer2</h4>
<p>All of our examples, going forward, will assume that you have access to your accounts, and that you’re using brandseyer2. We won’t do anything fancy, just the bare minimum brandseyer2 to demonstrate the data.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mentions &lt;-<span class="st"> </span><span class="kw"><a href="../reference/account.html">account</a></span>(<span class="st">"QUIR01BA"</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw"><a href="../reference/filter_mentions.html">filter_mentions</a></span>(<span class="st">"published after '2018/01/01' and published before '2018/02/01'"</span> ) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span>count_mentions
  
mentions
<span class="co">#&gt; # A tibble: 1 x 1</span>
<span class="co">#&gt;   mentionCount</span>
<span class="co">#&gt;          &lt;int&gt;</span>
<span class="co">#&gt; 1        36592</span></code></pre></div>
<p>So, we have 36 592 mentions published in the month of January. Instead of counting the mentions with <code><a href="../reference/count_mentions.html">count_mentions()</a></code>, you could instead use <code><a href="../reference/mentions.html">mentions()</a></code> to pull a table of all of these mentions.</p>
</div>
</div>
<div id="relative-dates" class="section level3">
<h3 class="hasAnchor">
<a href="#relative-dates" class="anchor"></a>Relative dates</h3>
<p>The filter language provides some convenient shortcuts. A common one is to find mentions from the last week</p>
<blockquote>
<p>published inthelast week</p>
</blockquote>
<p>Notice that <code>inthelast</code> is written as one word.</p>
<p>Similarly, we can find mentions</p>
<ul>
<li>published inthelast hour</li>
<li>published inthelast 24hours</li>
<li>published inthelast day</li>
<li>published inthelast week</li>
<li>published inthelast month</li>
<li>published inthelast quarter</li>
<li>published inthelast year</li>
</ul>
<p>Dates first, since this allows people to constrain data, rather than get everything. How do they cancel if they’re accidently pulling more than they want to?</p>
<ul>
<li>Published date is the important one</li>
<li>How to filter on hours.</li>
<li>Addendum: picked up date, updated date, what are these.</li>
</ul>
</div>
<div id="grouping-by-date" class="section level3">
<h3 class="hasAnchor">
<a href="#grouping-by-date" class="anchor"></a>Grouping by date</h3>
<ul>
<li>hour</li>
<li>day</li>
<li>week</li>
<li>month</li>
<li>year</li>
</ul>
</div>
</div>
<div id="selecting-mentions" class="section level2">
<h2 class="hasAnchor">
<a href="#selecting-mentions" class="anchor"></a>Selecting mentions</h2>
<ul>
<li>By ID</li>
<li>by conversation ID</li>
</ul>
</div>
<div id="relevancy" class="section level2">
<h2 class="hasAnchor">
<a href="#relevancy" class="anchor"></a>Relevancy</h2>
<blockquote>
<p>Relevancy isnt irrelevant</p>
</blockquote>
</div>
</div>
<div id="filter-patterns" class="section level1">
<h1 class="hasAnchor">
<a href="#filter-patterns" class="anchor"></a>Filter Patterns</h1>
<div id="basic-structure-of-a-statement" class="section level2">
<h2 class="hasAnchor">
<a href="#basic-structure-of-a-statement" class="anchor"></a>Basic structure of a statement</h2>
<p>There are three parts to a filter: a field, an operator, and a value. The field is a part of a mention. The operator looks different depending on whether it’s a number or text.</p>
</div>
<div id="joining-together-statements" class="section level2">
<h2 class="hasAnchor">
<a href="#joining-together-statements" class="anchor"></a>Joining together statements</h2>
<ul>
<li>What is <code>AND</code>? Both things must be true.</li>
<li>What is <code>OR</code>? Either things must be true.<br>
</li>
<li>It’s not English! There’s a distinct meaning.</li>
<li>This is called <em>Boolean Logic</em>, or <em>Boolean Algebra</em><a href="#fn4" class="footnoteRef" id="fnref4"><sup>4</sup></a>, after George Boole, a mathematician who published in the 1800s on logic and “rules of thought”.</li>
</ul>
</div>
</div>
<div id="more-filtering" class="section level1">
<h1 class="hasAnchor">
<a href="#more-filtering" class="anchor"></a>More filtering</h1>
<div id="sentiment" class="section level2">
<h2 class="hasAnchor">
<a href="#sentiment" class="anchor"></a>Sentiment</h2>
<p>Mentions by themselves are not always interesting. Mentions, as handled by BrandsEye, relate towards something that we name a <em>brand</em>. This is not necessarily a brand in the strict sense of the word. It certainly could be, but in this case, it’s the entity or concept or thing that the mention is related towards.</p>
<p>It is also, importantly, the thing that we measure sentiment towards.</p>
<p>Sentiment doesn’t exist in a vacuum, it is usually related to something.</p>
</div>
<div id="tags" class="section level2">
<h2 class="hasAnchor">
<a href="#tags" class="anchor"></a>Tags</h2>
<p>We introduce tags early, since topics are just tags.</p>
</div>
<div id="topics" class="section level2">
<h2 class="hasAnchor">
<a href="#topics" class="anchor"></a>Topics</h2>
</div>
<div id="data-verification" class="section level2">
<h2 class="hasAnchor">
<a href="#data-verification" class="anchor"></a>Data verification</h2>
<blockquote>
<p>process is verified</p>
</blockquote>
<blockquote>
<p>crowdVerified is true</p>
</blockquote>
<p>What’s the difference, and when to use which.</p>
</div>
<div id="things-that-should-always-be-in-filters" class="section level2">
<h2 class="hasAnchor">
<a href="#things-that-should-always-be-in-filters" class="anchor"></a>Things that should always be in filters</h2>
<ul>
<li>brands</li>
<li>topic trees?</li>
</ul>
</div>
<div id="location" class="section level2">
<h2 class="hasAnchor">
<a href="#location" class="anchor"></a>Location</h2>
<ul>
<li>Filtering by continents and large geographic regions.</li>
<li>Filtering by country</li>
<li>Filtering by country region / province / state.</li>
<li>Filtering by city</li>
</ul>
<p>Analyse is required to get all of these names.</p>
</div>
<div id="language" class="section level2">
<h2 class="hasAnchor">
<a href="#language" class="anchor"></a>Language</h2>
</div>
<div id="gender" class="section level2">
<h2 class="hasAnchor">
<a href="#gender" class="anchor"></a>Gender</h2>
</div>
<div id="joining-together-statements-revisted" class="section level2">
<h2 class="hasAnchor">
<a href="#joining-together-statements-revisted" class="anchor"></a>Joining together statements revisted</h2>
<p>Now that we have more statements, we can give more examples.</p>
<ul>
<li>Precedence.</li>
<li>Bracketing.</li>
</ul>
</div>
<div id="author-information" class="section level2">
<h2 class="hasAnchor">
<a href="#author-information" class="anchor"></a>Author information</h2>
</div>
<div id="finding-replies-and-reshares" class="section level2">
<h2 class="hasAnchor">
<a href="#finding-replies-and-reshares" class="anchor"></a>Finding replies and reshares</h2>
</div>
<div id="handling-conversations" class="section level2">
<h2 class="hasAnchor">
<a href="#handling-conversations" class="anchor"></a>Handling conversations</h2>
<p>While we’ve so far dealt with filtering individual mentions, we can also filter whole conversations.</p>
</div>
</div>
<div class="footnotes">
<hr>
<ol>
<li id="fn1"><p><a href="https://dplyr.tidyverse.org/">dplyr</a> is an amazing library for manipulating data. After downloading data using brandseyer2, it allows you to reshape the data to fit your needs.<a href="#fnref1">↩</a></p></li>
<li id="fn2"><p><a href="https://ggplot2.tidyverse.org/">ggplot2</a> is a rich visualisation library for R. After pulling data from brandseyer2, ggplot2 is a great tool for visualising the data.<a href="#fnref2">↩</a></p></li>
<li id="fn3"><p><a href="https://readr.tidyverse.org/">readr</a> is a library for reading and writing CSV data. R has a rich ecosystem for importing and exporting data, with other libraries providing support for Excel and Google Sheets.<a href="#fnref3">↩</a></p></li>
<li id="fn4"><p>You can ead more about Boolean Logic on <a href="https://en.wikipedia.org/wiki/Boolean_algebra">Wikipedia</a>.<a href="#fnref4">↩</a></p></li>
</ol>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#introduction">Introduction</a></li>
      <li>
<a href="#filtering">Filtering</a><ul class="nav nav-pills nav-stacked">
<li><a href="#dates">Dates</a></li>
      <li><a href="#selecting-mentions">Selecting mentions</a></li>
      <li><a href="#relevancy">Relevancy</a></li>
      </ul>
</li>
      <li>
<a href="#filter-patterns">Filter Patterns</a><ul class="nav nav-pills nav-stacked">
<li><a href="#basic-structure-of-a-statement">Basic structure of a statement</a></li>
      <li><a href="#joining-together-statements">Joining together statements</a></li>
      </ul>
</li>
      <li>
<a href="#more-filtering">More filtering</a><ul class="nav nav-pills nav-stacked">
<li><a href="#sentiment">Sentiment</a></li>
      <li><a href="#tags">Tags</a></li>
      <li><a href="#topics">Topics</a></li>
      <li><a href="#data-verification">Data verification</a></li>
      <li><a href="#things-that-should-always-be-in-filters">Things that should always be in filters</a></li>
      <li><a href="#location">Location</a></li>
      <li><a href="#language">Language</a></li>
      <li><a href="#gender">Gender</a></li>
      <li><a href="#joining-together-statements-revisted">Joining together statements revisted</a></li>
      <li><a href="#author-information">Author information</a></li>
      <li><a href="#finding-replies-and-reshares">Finding replies and reshares</a></li>
      <li><a href="#handling-conversations">Handling conversations</a></li>
      </ul>
</li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Constance Neeser.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
