<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Create a query for mentions or counts — query • brandseyer2</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Create a query for mentions or counts — query" />
<meta property="og:description" content="query() creates a query to be used for fetching mentions, or
for counting them. You probably want to avoid using this directly,
and use one of the query verbs instead, such as filter_mentions().
to_query() is a convenient way to create a query object from
other things, such as an account()." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">brandseyer2</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="Unreleased version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/brandseyer2.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/cookbook.html">The brandseyer2 Cookbook</a>
    </li>
    <li>
      <a href="../articles/filtering.html">Filtering</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/brandseye/brandseyer2/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Create a query for mentions or counts</h1>
    <small class="dont-index">Source: <a href='https://github.com/brandseye/brandseyer2/blob/master/R/filter_query.R'><code>R/filter_query.R</code></a></small>
    <div class="hidden name"><code>query.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>query()</code> creates a query to be used for fetching mentions, or
for counting them. You probably want to avoid using this directly,
and use one of the query verbs instead, such as <code><a href='filter_mentions.html'>filter_mentions()</a></code>.
<code><a href='to_query.html'>to_query()</a></code> is a convenient way to create a query object from
other things, such as an <code><a href='account.html'>account()</a></code>.</p>
    </div>

    <pre class="usage"><span class='fu'>query</span>(
  <span class='kw'>accounts</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>brands</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>timezones</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>filter</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>comparison</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>fields</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>grouping</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>ordering</span> <span class='kw'>=</span> <span class='kw'>NULL</span>
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>accounts</th>
      <td><p>A character vector of accounts to use.</p></td>
    </tr>
    <tr>
      <th>brands</th>
      <td><p>A list of brands to query against.</p></td>
    </tr>
    <tr>
      <th>timezones</th>
      <td><p>The timezones to report dates in when counting mentions.</p></td>
    </tr>
    <tr>
      <th>filter</th>
      <td><p>The filter to use when fetching or counting mentions.</p></td>
    </tr>
    <tr>
      <th>comparison</th>
      <td><p>A list of subfilters to use when counting mentions.</p></td>
    </tr>
    <tr>
      <th>fields</th>
      <td><p>Extra fields to return when fetching or counting mentions.</p></td>
    </tr>
    <tr>
      <th>grouping</th>
      <td><p>How to group mentions when counting them.</p></td>
    </tr>
    <tr>
      <th>ordering</th>
      <td><p>The order to return results in.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A query object</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The query object is accepted by <code><a href='count_mentions.html'>count_mentions()</a></code> and <code><a href='mentions.html'>mentions()</a></code>.
The advantage of using query and its various verbs is that it handles
adding root brands to your filter for you, as well as filtering out
mentions using older versions of the API, or who have no brands altogether.</p>
<p>Of special note, V4 accounts will not be added to a query.</p>
    <h2 class="hasAnchor" id="query-verbs"><a class="anchor" href="#query-verbs"></a>Query verbs</h2>

    


<p>Various functions can be chained together using the pipe operator as 'verbs'
in a query sentence.</p><ul>
<li><p><code><a href='filter_mentions.html'>filter_mentions()</a></code> lets you choose what mentions to count or fetch.</p></li>
<li><p><code><a href='group_mentions_by.html'>group_mentions_by()</a></code> lets you group mentions when counting.</p></li>
<li><p><code><a href='compare_mentions.html'>compare_mentions()</a></code> lets you count and compare mentions from subfilters.</p></li>
<li><p><code><a href='with_mention_fields.html'>with_mention_fields()</a></code> lets you select extra information fields, such as OTS, or engagement.</p></li>
<li><p><code><a href='with_mention_order.html'>with_mention_order()</a></code> lets you order the results.</p></li>
</ul>

    <h2 class="hasAnchor" id="data-models"><a class="anchor" href="#data-models"></a>Data models</h2>

    


<p>The filter language often uses IDs to represent countries, languages, and so on.
These can be found by using either the filter panel in <a href='https://analyse.brandseye.com'>Analyse</a>,
or the data model functions.</p><ul>
<li><p><code><a href='data_models.html'>data_model_countries()</a></code></p></li>
<li><p><code><a href='data_models.html'>data_model_languages()</a></code></p></li>
<li><p><code><a href='data_models.html'>data_model_networks()</a></code></p></li>
</ul>

    <h2 class="hasAnchor" id="accessors"><a class="anchor" href="#accessors"></a>Accessors</h2>

    


<p><code><a href='get_query_brands.html'>get_query_brands()</a></code> returns a list of <code><a href='filter_brand.html'>filter_brand()</a></code> objects. This
prints nicely, for examining all brands in a query.
<code><a href='get_query_accounts.html'>get_query_accounts()</a></code> returns a vector of account codes. This prints
nicely, for examining all accounts involved in a query.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>You can test if an object is a <code>query()</code> object using <code><a href='is_query.html'>is_query()</a></code>.
<code><a href='to_count_filter.html'>to_count_filter()</a></code> will allow you to convert a <code>query()</code> to
a vector of filters appropriate for use on <code><a href='count_mentions.html'>count_mentions()</a></code>.
<code><a href='to_mention_filter.html'>to_mention_filter()</a></code> is similar, but for the <code><a href='mentions.html'>mentions()</a></code> function.</p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='fu'>query</span>(<span class='kw'>accounts</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"TEST01AA"</span>, <span class='st'>"TEST02AA"</span>),
      <span class='kw'>filter</span> <span class='kw'>=</span> <span class='st'>"published inthelast week"</span>,
      <span class='kw'>timezone</span> <span class='kw'>=</span> <span class='st'>"UTC"</span>,
      <span class='kw'>brands</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(<span class='fu'><a href='filter_brand.html'>filter_brand</a></span>(<span class='fl'>1</span>), <span class='fu'><a href='filter_brand.html'>filter_brand</a></span>(<span class='fl'>2</span>))
)</div><div class='output co'>#&gt; BrandsEye Query
#&gt; <span style='color: #555555;'>  accounts:	</span><span>TEST01AA, TEST02AA
#&gt; </span><span style='color: #555555;'>  brands:	</span><span>1, 2
#&gt;   </span><span style='color: #555555;'>timezones:</span><span>	UTC
#&gt;   </span><span style='color: #555555;'>filter:</span><span>	published inthelast week </div></span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Constance Neeser, Lara Basson.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


